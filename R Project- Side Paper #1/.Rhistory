"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Set GEOID as row names and remove the GEOID column from data
rownames(data) <- data$GEOID
data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data) <- paste0(colnames(data), "_", file_name)
# Store the data frame in the list
data_list[[file_name]] <- data
}
df_list[[3]]
View(df_list[[6]])
View(df_list[[9]])
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = directory, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Set GEOID as row names and remove the GEOID column from data
rownames(data) <- data$GEOID
data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data) <- paste0(colnames(data), "_", file_name)
# Store the data frame in the list
data_list[[file_name]] <- data
}
View(data_list)
View(data_list[["2014"]])
final_data <- data.frame(data_list[[1]])
assign(file_name, data)
View(2022)
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Set GEOID as row names and remove the GEOID column from data
rownames(data) <- data$GEOID
data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data) <- paste0(colnames(data), "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
assign(file_name, data)
}
View(2010)
2010
# Initialize an empty list to store data frames
data_list <- list()
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Set GEOID as row names and remove the GEOID column from data
rownames(data) <- data$GEOID
data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data) <- paste0(colnames(data), "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
df_name <- paste0("data_", file_name)
assign(df_name, data.frame(data))
}
View(data_2010)
View(data_2012)
base_data <- data.frame()
library(dplyr)
library(tidyr)
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = directory, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
base_data <- data.frame()
?left_join
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Set GEOID as row names and remove the GEOID column from data
rownames(data) <- data$GEOID
data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data) <- paste0(colnames(data), "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(base_data, data, by ="GEO_ID")
View(data)
data[1,2]
View(data)
data[,2]
data[,2:ncol(data)]
colnames(data[,2:ncol(data)])
colnames(data[,2:ncol(data)]) <- paste0(colnames(data), "_", file_name)
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
file_name <- gsub(".csv", "", basename(file))
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
final_data <- full_join(base_data, data, by ="GEO_ID")
base_data <- read.csv("2010.csv")
base_data <- read.csv(csv_files[1])
View(base_data)
base_data <- read.csv(csv_files[1]) %>% select("GEOID")
base_data <- read.csv(csv_files[1]) %>% select("GEO_ID")
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEOID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(base_data, data, by ="GEO_ID")
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(base_data, data, by ="GEO_ID")
colnames(data[,2:ncol(data)])
paste0(colnames(data[,2:ncol(data)]), "_", file_name)
colnames(data[,2:ncol(data)]) <- paste0(colnames(data[,2:ncol(data)]), "_", file_name)
View(data)
