DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
cols_to_rename <- 2:ncol(data)
colnames(data)[cols_to_rename] <- paste0(colnames(data)[cols_to_rename], "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(base_data, data, by ="GEO_ID")
}
library(dplyr)
library(tidyr)
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = folder_path, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
final_data <- read.csv(csv_files[1]) %>% select("GEO_ID")
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"Geographic_Area_Name",
"Est_SX_AGE_Total_population",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"Est_HSPNC_Total_population",
"Est_NOTHSPNC_White_alone",
"Prct_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(Est_SX_AGE_Under35 = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
cols_to_rename <- 2:ncol(data)
colnames(data)[cols_to_rename] <- paste0(colnames(data)[cols_to_rename], "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(final_data, data, by ="GEO_ID")
}
final_data$Geographic_Area_Name_2022
# Save the final merged data frame to a CSV file
write.csv(final_data, "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Data - Selected Joins.csv", row.names = TRUE)
library(dplyr)
library(tidyr)
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = folder_path, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
final_data <- read.csv(csv_files[1]) %>% select("GEO_ID")
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"NAME",
"E_Total_population(SX_AGE)",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"E_HSPNC_Total_population",
"E_NOTHSPNC_White_alone",
"P_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(E_Under35(SX_AGE) = Est_SX_AGE_Under_5_years +
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"NAME",
"E_Total_population(SX_AGE)",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"E_HSPNC_Total_population",
"E_NOTHSPNC_White_alone",
"P_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(E_Under35(SX_AGE)) = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"NAME",
"E_Total_population_SX_AGE",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"E_HSPNC_Total_population",
"E_NOTHSPNC_White_alone",
"P_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(E_Under35_SX_AGE = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
cols_to_rename <- 2:ncol(data)
colnames(data)[cols_to_rename] <- paste0(colnames(data)[cols_to_rename], "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(final_data, data, by ="GEO_ID")
}
View(final_data)
library(dplyr)
library(tidyr)
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = folder_path, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
final_data <- read.csv(csv_files[1]) %>% select("GEO_ID")
#file <- csv_files[1]
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"NAME",
"E_Total_population_SX_AGE",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"E_HSPNC_Total_population",
"E_NOTHSPNC_White_alone",
"P_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(E_Under35_SX_AGE = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# # Set GEOID as row names and remove the GEOID column from data
# rownames(data) <- data$GEOID
# data <- data %>% select(-GEOID)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
cols_to_rename <- 2:ncol(data)
colnames(data)[cols_to_rename] <- paste0(colnames(data)[cols_to_rename], "_", file_name)
# Store the data frame in the list
#data_list[[file_name]] <- data
# df_name <- paste0("data_", file_name)
# assign(df_name, data.frame(data))
final_data <- full_join(final_data, data, by ="GEO_ID")
}
# Save the final merged data frame to a CSV file
write.csv(final_data, "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Data - Selected Joins.csv", row.names = TRUE)
library(dplyr)
library(tidyr)
# Define the directory containing the Excel files
folder_path <- "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Table DP05 2010-2022 (Tract)/New folder"
# Get a list of all Excel files in the directory
csv_files <- list.files(path = folder_path, pattern = ".csv", full.names = TRUE)
# Initialize an empty list to store data frames
data_list <- list()
# Initialize data frame of geoids to store results
final_data <- read.csv(csv_files[1]) %>% select("GEO_ID")
# Loop through each CSV file
for (file in csv_files) {
# Read the CSV file
data <- read.csv(file)
# Select the required columns
data <- data %>% select(
GEO_ID,
NAME,
DP05_0001E,
DP05_0004E,
DP05_0005E,
DP05_0006E,
DP05_0007E,
DP05_0008E,
DP05_0009E,
DP05_0065E,
DP05_0072E,
DP05_0072PE
)
# Convert the necessary columns to numeric
data <- data %>%
mutate_at(vars(DP05_0001E:DP05_0072PE), as.numeric)
# Rename the columns
colnames(data) <- c(
"GEO_ID",
"NAME",
"E_Total_population_SX_AGE",
"Est_SX_AGE_Under_5_years",
"Est_SX_AGE_5_to_9_years",
"Est_SX_AGE_10_to_14_years",
"Est_SX_AGE_15_to_19_years",
"Est_SX_AGE_20_to_24_years",
"Est_SX_AGE_25_to_34_years",
"E_HSPNC_Total_population",
"E_NOTHSPNC_White_alone",
"P_NOTHSPNC_White_alone"
)
# Create the new column Est_SX_AGE_Under35
data <- data %>%
mutate(E_Under35_SX_AGE = Est_SX_AGE_Under_5_years +
Est_SX_AGE_5_to_9_years +
Est_SX_AGE_10_to_14_years +
Est_SX_AGE_15_to_19_years +
Est_SX_AGE_20_to_24_years +
Est_SX_AGE_25_to_34_years)
data <- data %>% select (
-NAME,
-Est_SX_AGE_Under_5_years,
-Est_SX_AGE_5_to_9_years,
-Est_SX_AGE_10_to_14_years,
-Est_SX_AGE_15_to_19_years,
-Est_SX_AGE_20_to_24_years,
-Est_SX_AGE_25_to_34_years,
)
# Append the file name to each column name
file_name <- gsub(".csv", "", basename(file))
cols_to_rename <- 2:ncol(data)
colnames(data)[cols_to_rename] <- paste0(colnames(data)[cols_to_rename], "_", file_name)
final_data <- full_join(final_data, data, by ="GEO_ID")
}
# Save the final merged data frame to a CSV file
write.csv(final_data, "C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/DATA/Census/Census Data - Selected Joins.csv", row.names = TRUE)
load("~/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/R Project- Side Paper #1/Chapter10.RData")
# set the font for any output figures:
library(extrafont)
loadfonts(device = "win")
windowsFonts(FontStyle=windowsFont("Times New Roman"))
library(spdep)
library(sp)
library(ggplot2)
library(spatstat)
library(classInt)
library(dplyr)
library(plm)
library(splm)
spatial_data <- st_read(".", "gblntrans")
View(spatial_data)
spatial_data <- spatial_data %>% arrange(COUNTYNAME)
spatial_coord <- st_coordinates(st_centroid(spatial_data))
# Import necessary packages
library(reshape2)
library(sf)
library(tidyverse)
# Convert sf object to data.frame
spatial_data_df <- as.data.frame(spatial_data)
View(spatial_data_df)
# Extract only the needed data for panel regression:
spatial_data_df <- spatial_data_df[, c("COUNTYNAME","GDPPC95","GDPPC96","GDPPC97","GDPPC98","GDPPC99","GDPPC00","GDPPC01",
"FININCPC95","FININCPC96","FININCPC97","FININCPC98","FININCPC99","FININCPC00","FININCPC01",
"FDIPC95","FDIPC96","FDIPC97","FDIPC98","FDIPC99","FDIPC00","FDIPC01",
"FIXINVPC95","FIXINVPC96","FIXINVPC97","FIXINVPC98","FIXINVPC99","FIXINVPC00","FIXINVPC01",
"URB95","URB96","URB97","URB98","URB99","URB00","URB01")]
# Reshape the data to long format
spatial_data_long <- spatial_data_df %>%
pivot_longer(-COUNTYNAME,
names_to = c(".value", "Year"),
names_pattern = "([A-Za-z]+)([0-9]+)",
values_drop_na = TRUE)
View(spatial_data_long)
# Correct the year values
spatial_data_long$Year <- ifelse(as.numeric(spatial_data_long$Year) < 50,
paste0("20", spatial_data_long$Year),
paste0("19", spatial_data_long$Year))
# Creating a pdata.frame
spatial_data_p <- pdata.frame(spatial_data_long, index = c("COUNTYNAME", "Year"))
View(spatial_data_p)
?st_read
spatial_data <- st_read("Shapefile with All Data 03July2024", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("/Shapefile with All Data 03July2024", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("./Shapefile with All Data 03July2024", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read(".", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/Shapefile with All Data 03July2024", "DMAs_CirculatoryER_CensusData_GTrends")
View(spatial_data)
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/ArcGIS Project - Side Paper #1/ArcGIS Project - Side Paper #1.gdb", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/ArcGIS Project - Side Paper #1/ArcGIS Project - Side Paper #1.gdb", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/ArcGIS Project - Side Paper #1/ArcGIS Project - Side Paper #1.gdb", "DMAs_CirculatoryER_CensusData_GTrends.shp")
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/ArcGIS Project - Side Paper #1/ArcGIS Project - Side Paper #1", "DMAs_CirculatoryER_CensusData_GTrends")
View(spatial_data)
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/ArcGIS Project - Side Paper #1/ArcGIS Project - Side Paper #1.gdb", "DMAs_CirculatoryER_CensusData_GTrends")
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/Shapefile with All Data 03July2024", "DMAs_CirculatoryER_CensusData_GTrends")
library(splm)
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/Shapefile with All Data 08July2024", "DMAs_CirculatoryER_CensusData_GTrends")
library(spdep)
library(sp)
library(ggplot2)
library(spatstat)
library(classInt)
library(dplyr)
library(plm)
library(splm)
spatial_data <- st_read("C:/Users/cjkno/Documents/My Documents/Classes - '23 Spring/Research/Paper (Side) #1/Shapefile with All Data 08July2024", "DMAs_CirculatoryER_CensusData_GTrends")
View(spatial_data)
